#!/usr/bin/env bash

set -e
DATE=`date +%Y-%m-%d`
pushd ~

tar cvf - notes/ | gzip > notes-$DATE.tgz

# Here's how to exclude particular directories.
# TODO: Skip any files > 20 MB or so.
# command="tar cv --exclude notes/database/sd-prod-dump --exclude notes/atalanta/mgiza - notes/ | gzip > notes-$DATE.tgz"

openssl enc -aes-256-cbc -salt -in notes-$DATE.tgz  -out Dropbox/Backups/notes-$DATE.tgz.enc
# openssl dec -aes-256-cbc -salt -in notes-DATE.tgz.enc  -out Dropbox/Backups/notes-DATE.tgz
rm notes-$DATE.tgz

popd
